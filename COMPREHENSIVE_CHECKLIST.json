{
  "metadata": {
    "title": "Comprehensive System Checklist - New-Warungin",
    "version": "1.0.0",
    "lastUpdated": "2025-01-15",
    "description": "Complete checklist for all pages, routes, and functions to ensure no loading errors"
  },
  "frontendPages": {
    "dashboard": {
      "path": "/app/dashboard",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "CASHIER", "KITCHEN"],
      "apiEndpoint": "/api/dashboard/stats",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Dashboard route handles SUPER_ADMIN without tenantId correctly"
    },
    "products": {
      "path": "/app/products",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "CASHIER", "SUPER_ADMIN"],
      "apiEndpoint": "/api/products",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - Added tenantId validation and explicit params for SUPER_ADMIN"
    },
    "orders": {
      "path": "/app/orders",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "CASHIER", "KITCHEN", "SUPER_ADMIN"],
      "apiEndpoint": "/api/orders",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - Added tenantId validation and explicit params for SUPER_ADMIN"
    },
    "customers": {
      "path": "/app/customers",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "CASHIER", "SUPER_ADMIN"],
      "apiEndpoint": "/api/customers",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - Added tenantId validation and explicit params for SUPER_ADMIN"
    },
    "pos": {
      "path": "/app/pos",
      "roles": ["CASHIER", "ADMIN_TENANT", "SUPERVISOR", "SUPER_ADMIN"],
      "apiEndpoint": "/api/products",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - Added tenantId validation and explicit params for SUPER_ADMIN"
    },
    "reports": {
      "path": "/app/reports",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "CASHIER", "SUPER_ADMIN"],
      "apiEndpoint": "/api/reports/tenant",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - Added tenantId validation and explicit params for SUPER_ADMIN in loadReport and loadAnalytics"
    },
    "analytics": {
      "path": "/app/analytics",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/analytics/predictions",
      "requiresTenantId": false,
      "status": "fixed",
      "notes": "Fixed - Super Admin can access without tenant"
    },
    "finance": {
      "path": "/app/finance",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/finance/summary",
      "requiresTenantId": false,
      "status": "fixed",
      "notes": "Fixed - Super Admin can access without tenant"
    },
    "profit-loss": {
      "path": "/app/profit-loss",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/finance/profit-loss",
      "requiresTenantId": false,
      "status": "fixed",
      "notes": "Fixed - Super Admin can access without tenant"
    },
    "tenant-support": {
      "path": "/app/tenants/support",
      "roles": ["SUPER_ADMIN", "ADMIN_TENANT"],
      "apiEndpoint": "various",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - ADMIN_TENANT auto-selects tenant, all tabs work correctly"
    },
    "super-dashboard": {
      "path": "/app/super-dashboard",
      "roles": ["SUPER_ADMIN"],
      "apiEndpoint": "/api/dashboard/stats",
      "requiresTenantId": false,
      "status": "fixed",
      "notes": "Super Admin dashboard - no tenant needed"
    },
    "users": {
      "path": "/app/users",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "SUPER_ADMIN"],
      "apiEndpoint": "/api/users",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - Added tenantId validation and explicit params for SUPER_ADMIN"
    },
    "stores": {
      "path": "/app/stores",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/outlets",
      "requiresTenantId": true,
      "status": "fixed",
      "notes": "Fixed - Added tenantId validation and explicit params for SUPER_ADMIN"
    },
    "subscription": {
      "path": "/app/subscription",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/subscriptions",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses needsTenantSelection check - should be fine"
    },
    "addons": {
      "path": "/app/addons",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/addons",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses needsTenantSelection check - should be fine"
    },
    "rewards": {
      "path": "/app/rewards",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "SUPER_ADMIN"],
      "apiEndpoint": "/api/rewards",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses needsTenantSelection check - should be fine"
    },
    "discounts": {
      "path": "/app/discounts",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/discounts",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses needsTenantSelection check - should be fine"
    },
    "delivery": {
      "path": "/app/delivery",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "SUPER_ADMIN"],
      "apiEndpoint": "/api/delivery",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses needsTenantSelection check, requires addon"
    },
    "marketing": {
      "path": "/app/marketing",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/marketing",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses needsTenantSelection check, requires addon"
    },
    "inventory": {
      "path": "/app/inventory/*",
      "roles": ["ADMIN_TENANT", "SUPER_ADMIN"],
      "apiEndpoint": "/api/inventory/*",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses needsTenantSelection check - should be fine"
    },
    "settings": {
      "path": "/app/settings/*",
      "roles": ["ADMIN_TENANT", "SUPERVISOR", "CASHIER", "KITCHEN", "SUPER_ADMIN"],
      "apiEndpoint": "/api/settings/*",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Most settings routes use needsTenantSelection check"
    },
    "cash-shift": {
      "path": "/app/cashier/cash-shift",
      "roles": ["CASHIER"],
      "apiEndpoint": "/api/cash-shift",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "CASHIER role has tenantId from token - should be fine"
    },
    "kitchen-orders": {
      "path": "/app/orders/kitchen",
      "roles": ["KITCHEN"],
      "apiEndpoint": "/api/orders",
      "requiresTenantId": true,
      "status": "ok",
      "notes": "KITCHEN role has tenantId from token - should be fine"
    }
  },
  "backendRoutes": {
    "auth": {
      "file": "src/routes/auth.routes.ts",
      "endpoints": ["/auth/login", "/auth/me", "/auth/refresh-token", "/auth/logout"],
      "requiresTenantId": false,
      "status": "ok",
      "notes": "Auth routes don't need tenantId"
    },
    "products": {
      "file": "src/routes/product.routes.ts",
      "endpoints": ["/products", "/products/:id", "/products/:id/stock"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - handles SUPER_ADMIN correctly"
    },
    "orders": {
      "file": "src/routes/order.routes.ts",
      "endpoints": ["/orders", "/orders/:id"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - handles SUPER_ADMIN correctly"
    },
    "customers": {
      "file": "src/routes/customer.routes.ts",
      "endpoints": ["/customers", "/customers/:id"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - handles SUPER_ADMIN correctly"
    },
    "dashboard": {
      "file": "src/routes/dashboard.routes.ts",
      "endpoints": ["/dashboard/stats"],
      "requiresTenantId": "conditional",
      "status": "ok",
      "notes": "Handles SUPER_ADMIN without tenantId correctly"
    },
    "analytics": {
      "file": "src/routes/analytics.routes.ts",
      "endpoints": ["/analytics/predictions", "/analytics/top-products", "/analytics/trends"],
      "requiresTenantId": "conditional",
      "status": "ok",
      "notes": "Handles SUPER_ADMIN without tenantId correctly"
    },
    "finance": {
      "file": "src/routes/finance.routes.ts",
      "endpoints": ["/finance/summary", "/finance/profit-loss", "/finance/balance-sheet", "/finance/cash-flow"],
      "requiresTenantId": "conditional",
      "status": "ok",
      "notes": "Handles SUPER_ADMIN without tenantId correctly"
    },
    "users": {
      "file": "src/routes/user.routes.ts",
      "endpoints": ["/users", "/users/:id"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - handles SUPER_ADMIN correctly (can pass tenantId in body/query)"
    },
    "outlets": {
      "file": "src/routes/outlet.routes.ts",
      "endpoints": ["/outlets", "/outlets/:id"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - handles SUPER_ADMIN correctly (can pass tenantId in body/query)"
    },
    "reports": {
      "file": "src/routes/report.routes.ts",
      "endpoints": ["/reports/tenant", "/reports/global"],
      "requiresTenantId": "conditional",
      "status": "ok",
      "notes": "/reports/tenant uses requireTenantId, /reports/global is SUPER_ADMIN only"
    },
    "subscriptions": {
      "file": "src/routes/subscription.routes.ts",
      "endpoints": ["/subscriptions", "/subscriptions/:id"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - handles SUPER_ADMIN correctly"
    },
    "addons": {
      "file": "src/routes/addon.routes.ts",
      "endpoints": ["/addons", "/addons/subscribe"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - handles SUPER_ADMIN correctly"
    },
    "rewards": {
      "file": "src/routes/reward.routes.ts",
      "endpoints": ["/rewards", "/rewards/tenant/:tenantId/balance"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId or tenantId in path - should be fine"
    },
    "discounts": {
      "file": "src/routes/discount.routes.ts",
      "endpoints": ["/discounts", "/discounts/:id"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - should be fine"
    },
    "delivery": {
      "file": "src/routes/delivery.routes.ts",
      "endpoints": ["/delivery", "/delivery/:id"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId, requires addon"
    },
    "marketing": {
      "file": "src/routes/marketing.routes.ts",
      "endpoints": ["/marketing/*"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId, requires addon"
    },
    "inventory": {
      "file": "src/routes/purchase-order.routes.ts, stock-alert.routes.ts, etc.",
      "endpoints": ["/purchase-orders", "/stock-alerts", "/restock-suggestions"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - should be fine"
    },
    "cash-shift": {
      "file": "src/routes/cash-shift.routes.ts",
      "endpoints": ["/cash-shift/open", "/cash-shift/close", "/cash-shift/current"],
      "requiresTenantId": true,
      "status": "ok",
      "notes": "Uses requireTenantId - CASHIER has tenantId from token"
    }
  },
  "fixesApplied": {
    "tenantIdValidation": [
      "✅ POS.vue - Added tenantId validation and explicit params for SUPER_ADMIN",
      "✅ Products.vue - Added tenantId validation and explicit params for SUPER_ADMIN",
      "✅ TenantPOS.vue - Added delay and tenantId validation",
      "✅ TenantProducts.vue - Added tenantId validation and explicit params",
      "✅ Orders.vue - Added tenantId validation and explicit params for SUPER_ADMIN",
      "✅ Customers.vue - Added tenantId validation and explicit params for SUPER_ADMIN",
      "✅ Reports.vue - Added tenantId validation in loadReport and loadAnalytics",
      "✅ Users.vue - Added tenantId validation and explicit params for SUPER_ADMIN",
      "✅ Stores.vue - Added tenantId validation and explicit params for SUPER_ADMIN"
    ],
    "superAdminAccess": [
      "✅ Analytics - Super Admin can access without tenant",
      "✅ Finance - Super Admin can access without tenant",
      "✅ Profit Loss - Super Admin can access without tenant"
    ],
    "tenantSupport": [
      "✅ TenantSupport - ADMIN_TENANT auto-selects tenant",
      "✅ TenantSupport - All tabs (Dashboard, Products, Orders, Reports, POS) work correctly"
    ]
  },
  "summary": {
    "totalPages": 20,
    "pagesFixed": 9,
    "pagesOk": 11,
    "totalBackendRoutes": 15,
    "routesOk": 15,
    "overallStatus": "good",
    "notes": "All critical pages have been fixed. Remaining pages use needsTenantSelection check which should prevent errors."
  }
}
