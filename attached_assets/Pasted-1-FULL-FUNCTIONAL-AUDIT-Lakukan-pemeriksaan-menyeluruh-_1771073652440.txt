1. FULL FUNCTIONAL AUDIT

Lakukan pemeriksaan menyeluruh terhadap:

Semua halaman

Semua API endpoint

Semua module

Semua form

Semua tombol

Semua action database

Pastikan:

Tidak ada tombol yang tidak berfungsi

Tidak ada API yang tidak terpakai

Tidak ada error silent

Tidak ada function yang tidak terpanggil

Tidak ada route mati

Buat laporan:

Fitur

Status (OK / ERROR / LOGIC BUG / SECURITY ISSUE)

Perbaikan yang dilakukan

2. BUSINESS LOGIC VALIDATION

Uji seluruh alur bisnis secara sistematis:

A. SHIFT SYSTEM

Tidak bisa transaksi tanpa shift aktif

Semua transaksi memiliki shift_id

Shift yang sudah ditutup tidak bisa diubah

Laporan shift sesuai data transaksi

B. TRANSACTION

Tambah item

Diskon item

Diskon global

Pajak

Multi pembayaran

Refund

Edit transaksi

Pastikan:

Refund tidak menghapus data

Edit tercatat di audit log

Profit tetap akurat setelah refund

C. INVENTORY

Transaksi mengurangi stok

Refund mengembalikan stok

Adjust stok tercatat

Stock opname menghasilkan selisih yang benar

D. PROFIT CALCULATION

Validasi:
Profit = Revenue - HPP - Discount

Pastikan:

Tidak ada double hitung

Tidak ada selisih

HPP nonaktif tidak dihitung

3. DATABASE CONSISTENCY CHECK

Periksa:

Foreign key

Relasi antar tabel

tenant_id consistency

shift_id mandatory

user_id valid

Pastikan:

Tidak ada data orphan

Tidak ada transaksi tanpa tenant

Tidak ada audit tanpa reference

Tidak ada stok tanpa produk

4. MULTI-TENANT ISOLATION VALIDATION

Pastikan:

Semua query difilter tenant_id

Tenant A tidak bisa akses data tenant B

Tidak ada endpoint yang bypass filter

Tidak ada data leak

Tambahkan middleware:

Tenant Isolation Middleware

5. SUPER ADMIN IMPLEMENTATION

Tambahkan sistem SUPER ADMIN terpisah dari tenant.

Super Admin tidak memiliki tenant_id.

Super Admin dapat:

Melihat semua tenant

Membuat tenant baru

Mengedit tenant

Suspend / Aktifkan tenant

Menghapus tenant (soft delete)

Mengubah plan subscription

Melihat statistik global:

Total tenant

Total transaksi global

Total revenue platform

Melihat audit log semua tenant

Reset password owner tenant

Edit store milik tenant

Edit user milik tenant

Pastikan:

Super admin hanya bisa diakses role SUPER_ADMIN

Route terpisah: /super-admin

Middleware khusus super admin

6. ROLE VALIDATION

Validasi setiap role:

Kasir:

Tidak bisa ubah setting

Tidak bisa lihat data tenant lain

Supervisor:

Bisa refund

Bisa adjust stok

Owner:

Bisa ubah store

Bisa export laporan

Super Admin:

Bisa akses semua tenant

Bisa override plan

Bisa suspend akun

Pastikan tidak ada privilege escalation.

7. AUDIT LOG VALIDATION

Pastikan semua action berikut tercatat:

Edit transaksi

Refund

Adjust stok

Ubah HPP

Ubah setting

Tutup shift

Suspend tenant

Edit tenant data

Audit log harus memiliki:

id

actor_role

actor_id

tenant_id (nullable untuk super admin global action)

action_type

reference_type

reference_id

before_data

after_data

timestamp

Tidak boleh ada action critical tanpa audit entry.

8. ERROR HANDLING & EDGE CASE CHECK

Periksa:

Input kosong

Stok minus

Refund melebihi jumlah

Shift ganda

Login brute force

Query invalid

Tambahkan:

Validation layer

Try-catch global handler

Standardized error response

9. PERFORMANCE CHECK

Periksa:

Query reporting

Query shift aggregation

Index pada:

tenant_id

shift_id

product_id

created_at

Pastikan laporan tidak lambat.

10. OUTPUT YANG DIHARAPKAN

AI harus menghasilkan:

Daftar semua bug ditemukan

Perbaikan yang dilakukan

Struktur final role system

Struktur final super admin

Struktur middleware

Validasi bahwa semua logic berjalan

Daftar potensi risiko tersisa

Fokus utama:

Semua fitur berjalan.
Semua logic valid.
Multi-tenant aman.
Super admin bisa kontrol penuh.
Tidak ada celah manipulasi.

Akhiri dengan status:

SYSTEM FULLY AUDITED, LOGIC VALIDATED, SUPER ADMIN IMPLEMENTED, AND MULTI-TENANT SECURE